import{d as z,m as C,r as g,x as D,o as F,b as u,c as b,k as I,e as o,w as t,u as r,K as R,L as N,j as T,y as $,Z as A,C as v,O as x,i as _,s as J,t as K,_ as M,$ as W,h as Z,A as q,J as G}from"./vender-7f8e7721.js";import{u as H,g as P}from"./index-f41d5f41.js";import{g as Q}from"./index-2f5b5c16.js";import{_ as X}from"./index-bf5c3ed5.js";import"./about-b812182d.js";const Y={class:"dialog-footer"},ee=z({__name:"index",setup(le){H();const n=C({nickName:"",role:0}),c=g([]),d=g([]),E=()=>{P().then(a=>{d.value=a})},L=()=>{Q().then(a=>{c.value=a})},h=()=>{let a=[];n.nickName||n.role?(n.nickName&&(a=d.value.filter(e=>e.nickName.indexOf(n.nickName)!==-1)),n.role&&(a=n.nickName?a:d.value,a=a.filter(e=>e.role.find(m=>m.role===n.role)))):a=d.value,d.value=a};D([()=>n.nickName,()=>n.role],()=>{(n.nickName===""||n.role===0)&&(console.log("没有把"),E())});const i=g(!1),s=C({id:0,nickName:"",role:[],userName:""}),B=a=>{i.value=!0,Object.assign(s,{...a,role:a.role.map(e=>e.role)})},S=()=>{console.log(s),i.value=!1;let a=d.value.find(e=>e.id===s.id);a.nickName=s.nickName,a.role=[],console.log(a),c.value.forEach(e=>{s.role.find(m=>m===e.roleId)&&a.role.push({role:e.roleId,roleName:e.roleName})})};return F(()=>{E(),L()}),(a,e)=>{const m=J,p=K,y=M,w=W,f=Z,U=T,k=q,O=$,j=A;return u(),b(N,null,[I("div",null,[o(U,{inline:!0,class:"search-form",model:r(n)},{default:t(()=>[o(p,{label:"用户名称"},{default:t(()=>[o(m,{modelValue:r(n).nickName,"onUpdate:modelValue":e[0]||(e[0]=l=>r(n).nickName=l),placeholder:"请输入用户名称"},null,8,["modelValue"])]),_:1}),o(p,{label:"用户角色"},{default:t(()=>[o(w,{modelValue:r(n).role,"onUpdate:modelValue":e[1]||(e[1]=l=>r(n).role=l),style:{width:"120px"}},{default:t(()=>[(u(),v(y,{key:0,label:"全部",value:0})),(u(!0),b(N,null,x(r(c),l=>(u(),v(y,{key:l.roleId,label:l.roleName,value:l.roleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(p,null,{default:t(()=>[o(f,{type:"primary",onClick:h},{default:t(()=>e[6]||(e[6]=[_("查询")])),_:1})]),_:1})]),_:1},8,["model"]),o(O,{data:r(d),border:"",style:{width:"100%"}},{default:t(()=>[o(k,{prop:"id",label:"编号",width:"180"}),o(k,{prop:"nickName",label:"用户昵称",width:"180"}),o(k,{prop:"role",label:"用户角色"},{default:t(l=>[(u(!0),b(N,null,x(l.row.role,V=>(u(),v(f,{key:V.role,link:"",type:"primary",size:"small"},{default:t(()=>[_(G(V.roleName),1)]),_:2},1024))),128))]),_:1}),o(k,{prop:"role",label:"操作"},{default:t(l=>[o(f,{link:"",type:"primary",size:"small",onClick:V=>B(l.row)},{default:t(()=>e[7]||(e[7]=[_("编辑")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),o(j,{modelValue:r(i),"onUpdate:modelValue":e[5]||(e[5]=l=>R(i)?i.value=l:null),title:"编辑用户信息"},{footer:t(()=>[I("span",Y,[o(f,{onClick:e[4]||(e[4]=l=>i.value=!1)},{default:t(()=>e[8]||(e[8]=[_("取消")])),_:1}),o(f,{type:"primary",onClick:S},{default:t(()=>e[9]||(e[9]=[_("修改")])),_:1})])]),default:t(()=>[o(U,{model:r(s)},{default:t(()=>[o(p,{label:"用户昵称","label-width":"120px"},{default:t(()=>[o(m,{modelValue:r(s).nickName,"onUpdate:modelValue":e[2]||(e[2]=l=>r(s).nickName=l),class:"w192",autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(p,{label:"用户角色","label-width":"120px"},{default:t(()=>[o(w,{modelValue:r(s).role,"onUpdate:modelValue":e[3]||(e[3]=l=>r(s).role=l),multiple:"",class:"m-2",size:"large",placeholder:"请选择角色"},{default:t(()=>[(u(!0),b(N,null,x(r(c),l=>(u(),v(y,{key:l.roleId,label:l.roleName,value:l.roleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}});const se=X(ee,[["__scopeId","data-v-73890b57"]]);export{se as default};
